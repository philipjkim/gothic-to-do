package templates

// ThemeToggleHeader - Uses Alpine.js for instant client-side UI
// without server round-trips.
templ ThemeToggleHeader() {
	<div class="navbar bg-base-100 rounded-box shadow-md"
		x-data="{
			theme: localStorage.getItem('theme') || 'cupcake',
			themes: ['cupcake', 'light', 'dark'],
			setTheme(t) {
				this.theme = t;
				document.documentElement.setAttribute('data-theme', t);
				localStorage.setItem('theme', t);
			}
		}"
		x-init="setTheme(theme)"
	>
		<div class="flex-1">
			<span class="text-xl font-bold px-4">ğŸ“ To-Do App</span>
		</div>
		<div class="flex-none">
			<div class="dropdown dropdown-end">
				<div tabindex="0" role="button" class="btn btn-ghost btn-sm gap-1">
					ğŸ¨ Theme
					<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
					</svg>
				</div>
				<ul tabindex="0" class="dropdown-content z-10 menu p-2 shadow-lg bg-base-100 rounded-box w-40">
					<template x-for="t in themes" :key="t">
						<li>
							<button
								x-text="t"
								@click="setTheme(t)"
								:class="{ 'active': theme === t }"
								class="capitalize"
							></button>
						</li>
					</template>
				</ul>
			</div>
		</div>
	</div>
}

// TodoForm - HTMX form to add a new todo
templ TodoForm() {
	<div class="card bg-base-100 shadow-md">
		<div class="card-body p-4">
			<form
				hx-post="/todos"
				hx-target="#todo-list"
				hx-swap="innerHTML"
				hx-on::after-request="this.reset()"
				class="flex gap-2"
			>
				<input
					type="text"
					name="title"
					placeholder="What needs to be done?"
					required
					class="input input-bordered flex-1"
					autocomplete="off"
				/>
				<button type="submit" class="btn btn-primary">Add</button>
			</form>
		</div>
	</div>
}
